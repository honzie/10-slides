"use strict";(function(){let e=document.getElementById("presentButton");let t=document.getElementById("edit");let n=document.getElementById("present");let i=document.getElementById("modal");let l=document.getElementById("load");let d=document.getElementById("discard");let c=function(e){let t=e.split(" (")[0];return t.indexOf("://")>=0&&t.match(/\s/)===null};let s=function(e,t){let n=e.split("\n");let i=document.createElement("section");let l;let d;let s;let a=true;let r=function(e){if(d&&e!=="list"){i.appendChild(d);d=undefined}if(l&&e!=="gallery"){i.appendChild(l);l=undefined}if(s&&e!=="code"){i.appendChild(s);s=undefined}};for(let o=0;o<n.length;o++){let u=n[o].trim();if(o===0){if(c(u)){let m=u.split(" (");let f=document.createElement("p");f.innerText=m[1].slice(0,m[1].length-1);i.appendChild(f);let p=document.createElement("div");p.classList.add("full-bleed");p.style.backgroundImage="url("+m[0]+")";i.appendChild(p)}else{let f=document.createElement(t===0?"h1":"h2");f.innerText=u;i.appendChild(f)}}else{if(u[0]==="-"||u[0]==="*"){r("list");if(!d){d=document.createElement("ul");a=false}let f=document.createElement("li");f.innerText=u.slice(1).trim();d.appendChild(f)}else if(c(u)){r("gallery");if(!l){l=document.createElement("ul");l.classList.add("gallery");a=false}let m=u.split(" (");let p=new Image;p.src=m[0];p.alt=m[1].slice(0,m[1].length-1);let f=document.createElement("li");f.appendChild(p);l.appendChild(f)}else if(n[o].indexOf("  ")===0){r("code");if(!s){s=document.createElement("pre");a=false}s.innerText+=n[o].slice(2)+"\n"}else{r();if(o>=2){a=false}let f=document.createElement("p");f.innerText=u;i.appendChild(f)}}}r();if(a){i.classList.add("slide--centered")}return i};let a=function(e){if(e){e.preventDefault();window.location.hash="present"}let i=t.value;let l=i.split("\n\n");let d=document.createElement("main");for(let c=0;c<l.length;c++){d.appendChild(s(l[c],c))}let a=document.createElement("section");a.classList.add("slide--end");d.appendChild(a);n.innerHTML=d.innerHTML;n.querySelector("section").classList.add("current")};let r=function(){let e=n.querySelector(".current");if(e){e.classList.remove("current");if(e.nextSibling){e.nextSibling.classList.add("current")}else{u()}}};let o=function(){let e=n.querySelector(".current");if(e&&e.previousSibling){e.classList.remove("current");e.previousSibling.classList.add("current")}};let u=function(){window.location.hash=""};a();e.addEventListener("click",a);n.addEventListener("click",r);let m={27:u,37:o,38:o,39:r,40:r};document.addEventListener("keydown",function(e){if(m[e.keyCode]){m[e.keyCode]()}});try{let f=function(e){return function(){i.classList.remove("u-visible");if(e){t.value=localStorage.getItem("slideshow")}else{localStorage.removeItem("slideshow")}}};if(window.localStorage.slideshow){i.classList.add("u-visible");l.addEventListener("click",f(true));d.addEventListener("click",f())}}catch(p){}t.addEventListener("input",function(e){if(e.target.classList.contains("autosave")){try{localStorage.setItem("slideshow",t.value)}catch(n){}}})})();